{% extends "base.html" %}
{% block title %}Application Details{% endblock %}

{% block content %}
<div class="container py-5">
    <h2>Application for {{ application.job.title }}</h2>

    <div class="card p-4 shadow-sm">
        <h4>Applicant Details</h4>
        <p><strong>Name:</strong> {{ application.applicant_name }}</p>
        <p><strong>Email:</strong> {{ application.applicant_email }}</p>
        <p><strong>Resume:</strong>
            {% if application.resume %}
                <a href="{{ url_for('static', filename='resumes/' ~ application.resume) }}" target="_blank">View Resume</a>
            {% endif %}
            {% if application.drive_link %}
                {% if application.resume %} | {% endif %}
                <a href="{{ application.drive_link }}" target="_blank">View on Google Drive</a>
            {% endif %}
            {% if not application.resume and not application.drive_link %}
                No resume uploaded
            {% endif %}
        </p>

        <p><strong>Cover Letter:</strong> {{ application.cover_letter or "Not provided" }}</p>

        <hr>

        <form method="POST">
            <div class="mb-3">
                <label for="status" class="form-label">Update Status</label>
                <select name="status" id="status" class="form-control">
                    <option value="new" {% if application.status=='new' %}selected{% endif %}>New</option>
                    <option value="reviewing" {% if application.status=='reviewing' %}selected{% endif %}>Reviewing</option>
                    <option value="shortlisted" {% if application.status=='shortlisted' %}selected{% endif %}>Shortlisted</option>
                    <option value="interview" {% if application.status=='interview' %}selected{% endif %}>Interview</option>
                    <option value="rejected" {% if application.status=='rejected' %}selected{% endif %}>Rejected</option>
                    <option value="hired" {% if application.status=='hired' %}selected{% endif %}>Hired</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="notes" class="form-label">Admin Notes</label>
                <textarea name="notes" id="notes" class="form-control" rows="4">{{ application.notes }}</textarea>
            </div>

            <button type="submit" class="btn btn-primary">Save Changes</button>
        </form>
    </div>
</div>
{% endblock %}
